<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>SHILKA (keywords description translator): Generated code</TITLE>
 <LINK HREF="shilka-4.html" REL=next>
 <LINK HREF="shilka-2.html" REL=previous>
 <LINK HREF="shilka.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="shilka-4.html">Next</A>
<A HREF="shilka-2.html">Previous</A>
<A HREF="shilka.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3.</A> <A HREF="shilka.html#toc3">Generated code</A></H2>

<P>A specification as described in the previous section is translated by
SHILKA (keywords description translator) into interface and
implementation files having the same names as one of specification
file and correspondingly suffixes `.h' and `.c' (C code) or `.cpp'
(C++ code).  By default the interface file is not generated.</P>


<H2><A NAME="ss3.1">3.1</A> <A HREF="shilka.html#toc3.1">C++ code</A>
</H2>

<P>The interface and implementation files consist of the following
definitions of generated macros, types, and functions:
<DL>
<DT><B>Class `KR_recognizer'.</B><DD><P>Object of the class describes a keyword recognizer.  If the
interface file is generated, the interface file contains the
class.  The implementation file contains the class functions
themself.  The class has the following public members:
<OL>
<LI>Function 
<BLOCKQUOTE><CODE>
<PRE>
              `&lt;type> KR_find_keyword (const char *KR_keyword,
                                       int KR_length)'
</PRE>
</CODE></BLOCKQUOTE>

The function has two parameters: keyword being recognized
and length in characters of the keyword.  By default the
function returns code of recognized keyword (integer type
or enumeration -- see flag `-enum').  The function will
return value of type given in construction `%type' of the
description file.  Usually the value contains some
additional information about recognized keyword.
<P>By default the keyword is suggested to be stored according
to C representation (with zero byte as end marker).  If
this is not true, you can use option `-length' during
generation of the keyword recognizer by SHILKA.  In this
case the function `strncmp' instead of `strcmp' is used for
keywords comparison.</P>
<P>If option `-inline' has been used, the function is defined
as inline.  This can significantly speed up keywords
recognition.</P>

</LI>
<LI>Function
<BLOCKQUOTE><CODE>
<PRE>
             `void KR_output_statistics (void)'
</PRE>
</CODE></BLOCKQUOTE>

The function outputs number of occurrences for each keywords
since the keyword recognizer start.  The function also
outputs relative frequencies of occurrences (this value is
always nonzero).  The frequencies output after work
recognizer on a large typical program can be used for
setting up keyword frequencies in the description file for
generation of faster keyword recognizer.
<P>The function do nothing if SHILKA flag `-strip' has been
used during the keyword recognizer or flag `-statistics' has
been not used.  Flag `-statistics' simply generates macro
definition `__KR__DEBUG__' which includes code for picking
up and outputting statistics about keyword occurrences.</P>

</LI>
<LI>Function
<BLOCKQUOTE><CODE>
<PRE>
             `void KR_reset (void)'
</PRE>
</CODE></BLOCKQUOTE>

The function initiates keyword recognizer.
    </LI>
<LI>Constructor
<BLOCKQUOTE><CODE>
<PRE>
             `void KR_recognizer (void)'
</PRE>
</CODE></BLOCKQUOTE>

The constructor simply calls function `KR_reset'.
</LI>
<LI>Destructor
<BLOCKQUOTE><CODE>
<PRE>
             `~KR_recognizer (void)'
</PRE>
</CODE></BLOCKQUOTE>

This destructor is for accurate finish work with the keyword
recognizer.</LI>
</OL>
</P>
<DT><B>Macros or enumeration (see option `-enum')</B><DD><P>which declare keyword codes.  Macros or enumeration constants
have the same name as one in the description file and prefix
`KR_' (see also option `-p').  SHILKA generates additional code
`KR__not_found'.  By default such code means that any keyword
is not found.  Macros or enumeration are generated in interface
file only if option `-export' is present on SHILKA command
line.  By default, the macros or the enumeration are generated
in the implementation file.  Usually, the last case means that
only the keyword recognizer implementation file is used, and
the file is included into another C/C++ file.</P>
</DL>
</P>

<H2><A NAME="ss3.2">3.2</A> <A HREF="shilka.html#toc3.2">C code</A>
</H2>

<P>The interface and implementation files consist of the following
definitions of generated macros, types, and functions:
<OL>
<LI>Macros or enumeration (see option `-enum') which declare
keyword codes.  Macros or enumeration constants have the same
name as one in the description file and prefix `KR_' (see also
option `-p').  SHILKA generates additional code
`KR__not_found'.  By default such code means that any keyword
is not found.  Macros or enumeration are generated in interface
file only if option `-export' is present on SHILKA command
line.  By default, the macros or the enumeration are generated
in the implementation file.  Usually, the last case means that
only the keyword recognizer implementation file is generated,
and the file is included into another C/C++ file.
</LI>
<LI>Function 
<BLOCKQUOTE><CODE>
<PRE>
          `&lt;type> KR_find_keyword (const char *KR_keyword,
                                   int KR_length)'
</PRE>
</CODE></BLOCKQUOTE>

The function has two parameters: keyword being recognized and
length in characters of the keyword.  By default the function
returns code of recognized keyword (integer type or enumeration
-- see flag `-enum').  The function can also return value of
type given in construction `%type' of the description file.
Usually the value contains some additional information about
recognized keyword.
<P>By default the keyword is suggested to be stored according to C
representation (with zero byte as end marker).  If this is not
true, you can use option `-length' during generation of the
keyword recognizer by SHILKA.  In this case the function
`strncmp' instead of `strcmp' is used for keywords comparison.</P>
<P>If option `-inline' has been used, the function is defined as
inline.  This can significantly speed up keywords recognition.</P>
<P>If the interface file is generated, the interface file contains
external definition of the function.  The implementation file
contains the function itself.</P>

</LI>
<LI>Function
<BLOCKQUOTE><CODE>
<PRE>
          `void KR_reset (void)'
</PRE>
</CODE></BLOCKQUOTE>

The function initiates keyword recognizer.  Therefore the
function must be called by the first.  If the interface file is
generated, the interface file contains external definition of
the function.  The implementation file contains the function
itself.
    </LI>
<LI>Function
<BLOCKQUOTE><CODE>
<PRE>
          `void KR_output_statistics (void)'
</PRE>
</CODE></BLOCKQUOTE>

The function outputs number of occurrences for each keywords
since the keyword recognizer start.  The function also outputs
relative frequencies of occurrences (this value is always
nonzero).  The frequencies output after work recognizer on a
large typical program can be used for setting up keyword
frequencies in the description file for generation of faster
keyword recognizer.
<P>The function do nothing if SHILKA flag `-strip' has been used
during the keyword recognizer or flag `-statistics' has been
not used.  Flag `-statistics' simply generates macro definition
`__KR__DEBUG__' which includes code for picking up and
outputting statistics about keyword occurrences.</P>
<P>If the interface file is generated, the interface file contains
external definition of the function.  The implementation file
contains the function itself.</P>
</LI>
</OL>
</P>

<HR>
<A HREF="shilka-4.html">Next</A>
<A HREF="shilka-2.html">Previous</A>
<A HREF="shilka.html#toc3">Contents</A>
</BODY>
</HTML>
